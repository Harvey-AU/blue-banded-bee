<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blue Banded Bee - Speed Up Your Site Now</title>

    <script>
      (function () {
        try {
          if (window.location.pathname !== "/") return;
          const hasOAuthHash =
            window.location.hash.includes("access_token=") ||
            window.location.hash.includes("refresh_token=");
          const params = new URLSearchParams(window.location.search);
          const hasOAuthQuery =
            params.has("code") ||
            params.has("state") ||
            params.has("error") ||
            params.has("error_code");
          if (!hasOAuthHash && !hasOAuthQuery) return;

          window.location.replace(
            `/auth/callback${window.location.search}${window.location.hash}`
          );
        } catch (_error) {
          // Continue with normal render if redirect bootstrap fails.
        }
      })();
    </script>
    <link rel="stylesheet" href="/styles/app.css" />
    <script src="/js/bb-bootstrap.js"></script>
    <script src="/js/core.js" defer></script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-D990P29YMF"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-D990P29YMF");
    </script>
  </head>

  <body class="page-homepage">
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <a href="/" class="logo">
            <span>üêù</span>
            Blue Banded Bee
          </a>
          <nav class="header-nav">
            <a href="/dashboard" class="nav-link">Dashboard</a>
            <a href="#features" class="nav-link">Features</a>
            <a href="#" id="headerSignInBtn" class="nav-link">Sign In</a>
          </nav>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <h1>Speed up your site now</h1>
        <p class="subtitle">Cache warming for lightning-fast websites</p>
        <p class="description">
          Automatically warm your site's cache after publishing to eliminate
          slow page loads. Built for Webflow, Shopify, and any website that
          needs instant performance.
        </p>

        <!-- Conversion Form -->
        <div class="conversion-form">
          <h2 class="form-title">Get started in 30 seconds</h2>
          <p class="form-subtitle">
            Enter your website to see how much faster it could be
          </p>

          <form id="marketingForm" class="domain-form">
            <input
              type="text"
              id="marketingDomain"
              placeholder="yourdomain.com"
              class="domain-input"
              required
            />
            <button type="submit" class="cta-button">Start Warming</button>
          </form>

          <p class="form-note">
            Free account ‚Ä¢ No credit card required ‚Ä¢
            <a href="#" id="existingUserLink">Already have an account?</a>
          </p>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
      <div class="container">
        <h2>Why cache warming matters</h2>
        <p class="features-subtitle">
          First impressions matter. Don't let slow page loads cost you visitors
          and conversions.
        </p>

        <div class="features-grid">
          <div class="feature">
            <div class="feature-icon">üöÄ</div>
            <h3>Instant Page Loads</h3>
            <p>
              Automatically crawl and warm your entire site after publishing,
              ensuring every page loads instantly for your visitors.
            </p>
          </div>

          <div class="feature">
            <div class="feature-icon">ü§ñ</div>
            <h3>Smart Automation</h3>
            <p>
              Connects with Webflow and Shopify webhooks to automatically warm
              your cache whenever you publish changes.
            </p>
          </div>

          <div class="feature">
            <div class="feature-icon">üìä</div>
            <h3>Performance Insights</h3>
            <p>
              See exactly which pages are slow, monitor cache performance, and
              get detailed crawl reports for optimization.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Social Proof Section -->
    <section class="social-proof">
      <div class="container">
        <h2>Trusted by fast websites</h2>

        <div class="stats">
          <div class="stat">
            <div class="stat-number">10M+</div>
            <div class="stat-label">Pages warmed</div>
          </div>

          <div class="stat">
            <div class="stat-number">500+</div>
            <div class="stat-label">Happy customers</div>
          </div>

          <div class="stat">
            <div class="stat-number">99.9%</div>
            <div class="stat-label">Uptime</div>
          </div>

          <div class="stat">
            <div class="stat-number">2.3s</div>
            <div class="stat-label">Avg. speed boost</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Final CTA -->
    <section class="final-cta">
      <div class="container">
        <h2>Ready to speed up your site?</h2>
        <p>Join hundreds of websites that never have slow page loads</p>
        <button
          id="finalCtaBtn"
          class="cta-button"
          style="font-size: 20px; padding: 20px 40px"
        >
          Get Started Free
        </button>
      </div>
    </section>

    <!-- Load shared authentication modal -->
    <div id="authModalContainer"></div>

    <script>
      async function initializeHomepage() {
        try {
          await window.BB_APP.whenReady();
        } catch (error) {
          console.error("Core initialisation failed", error);
          // Show a visible error so users aren't left with dead buttons
          var banner = document.createElement("div");
          banner.style.cssText =
            "position:fixed;top:0;left:0;right:0;z-index:10000;" +
            "background:#fee2e2;color:#dc2626;text-align:center;" +
            "padding:12px;font-size:14px;";
          banner.textContent =
            "Something went wrong loading the page. Please refresh.";
          document.body.appendChild(banner);
          return;
        }
        setupHomepageHandlers();
      }

      document.addEventListener("DOMContentLoaded", initializeHomepage);

      function setupHomepageHandlers() {
        // Marketing form handler
        const marketingForm = document.getElementById("marketingForm");
        if (marketingForm) {
          marketingForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const domain = document
              .getElementById("marketingDomain")
              .value.trim();

            if (!domain) {
              if (window.showError) showError("Please enter a domain");
              return;
            }

            // Validate domain format
            const domainRegex =
              /^[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]?\.[a-zA-Z]{2,}$/;
            const cleanDomain = domain
              .replace(/^https?:\/\//, "")
              .replace(/\/$/, "");

            if (!domainRegex.test(cleanDomain)) {
              if (window.showError)
                showError("Please enter a valid domain (e.g., example.com)");
              return;
            }

            // Store domain and show signup
            sessionStorage.setItem("bb_pending_domain", cleanDomain);
            console.log("Domain stored:", cleanDomain);

            // Try to show auth modal
            try {
              showAuthModal();
              // Default to signup for new users
              setTimeout(() => {
                showSignupForm();
              }, 100);
            } catch (error) {
              console.error("Auth modal not available:", error);
              alert("Please try again - authentication modal is loading...");
            }
          });
        }

        // Header sign in button
        const headerSignInBtn = document.getElementById("headerSignInBtn");
        if (headerSignInBtn) {
          headerSignInBtn.addEventListener("click", (e) => {
            e.preventDefault();
            try {
              showAuthModal();
              showLoginForm();
            } catch (error) {
              console.error("Auth modal not available:", error);
              alert("Please try again - authentication modal is loading...");
            }
          });
        }

        // Existing user link
        const existingUserLink = document.getElementById("existingUserLink");
        if (existingUserLink) {
          existingUserLink.addEventListener("click", (e) => {
            e.preventDefault();
            try {
              showAuthModal();
              showLoginForm();
            } catch (error) {
              console.error("Auth modal not available:", error);
              alert("Please try again - authentication modal is loading...");
            }
          });
        }

        // Final CTA button
        const finalCtaBtn = document.getElementById("finalCtaBtn");
        if (finalCtaBtn) {
          finalCtaBtn.addEventListener("click", () => {
            document.querySelector(".conversion-form").scrollIntoView({
              behavior: "smooth",
            });
          });
        }
      }
    </script>
  </body>
</html>
